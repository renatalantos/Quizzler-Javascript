let questions = [

  {

    url: './assets/images/alhambra.jpg',
    question: 'Where is the Alhambra, famous for its Moorish architecture?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Granada, Spain',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Rabat, Morocco',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Tunis, Tunisia',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Istanbul, Turkey',
    answer: 1,
  },

  {
    url: './assets/images/dali.jpg',
    question: 'What is the name of the art trend that Salvador Dali is a representant of?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Impressionism',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Surrealism',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Cubism',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Expressionism',
    answer: 2,
  },

  {
    url: './assets/images/gaudi.jpg',
    question: 'What was the name of the architect who designed the above building?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Hundertwasser',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Le Corbusier',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Hassan Fathy',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Antonio Gaudi',
    answer: 4,
  },


  {
    url: './assets/images/klimt.jpg',
    question: 'What is the name of the art trend that Gustav Klimt is a representant of?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Art Nouveau',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Reneissance',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Baroque',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Expressionism',
    answer: 1,
  },


  {
    url: './assets/images/frida_kahlo.jpg',
    question: 'Which actress plays artist Frida Kahlo in the 2002 movie "Frida"?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Eva Mendes',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Sandra Bullock',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Salma Hayek',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Rachel Weisz',
    answer: 3,
  },

  {
    url: './assets/images/knossos.jpg',
    question: 'What is the mythical half man, half bull creature that by legend lived in Knossos, Crete?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Ulysses',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Minotaur',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Centaur',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Nymph',
    answer: 2,
  },

  {
    url: './assets/images/lautrec.jpg',
    question: 'What technology did French artist Toulouse-Lautrec reinvent for his posters?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Calligraphy',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Ortography',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Lithography',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Biography',
    answer: 3,
  },

  {
    url: './assets/images/last_supper.jpg',
    question: "In which movie is Leonardo's Last Supper acted out?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'The Dirty Dozen',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'The Da Vinci Code',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + "The Devil's Advocate",
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + "Ocean's Twelve",
    answer: 1,
  },

  {
    url: './assets/images/marc_chagall.jpg',
    question: 'Who was the above picture painted by?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Pablo Picasso',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Edvard Munch',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Paul Klee',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Marc Chagall',
    answer: 4,
  },

  {
    url: './assets/images/mero_nubia.jpg',
    question: 'Where are the above pyramids?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Cholula, Mexico',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Ghiza, Egypt',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Meroe, Sudan',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Caral, Peru',
    answer: 3,
  },

  {
    url: './assets/images/miro.jpg',
    question: 'Which artist has paintings that reinvoke the childlike?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Pablo Picasso',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Joan Miro',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Vasily Kandinsky',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Paul Klee',
    answer: 2,
  },

  {
    url: './assets/images/monet.jpg',
    question: 'Which French artist painted the above picture?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Claude Monet',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Edouard Manet',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Georges Seurat',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Edgar Degas',
    answer: 1,
  },

  {
    url: './assets/images/moore.jpg',
    question: 'Who is the sculptor that created the above piece of art?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Thomas Moore',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Roger Moore',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Michael Barrymore',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Henry Moore',
    answer: 4,
  },

  {
    url: './assets/images/nyugatip.jpg',
    question: 'Where is the above train station, designed by Gustav Eiffel?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Paris, France',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Budapest, Hungary',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'London, England',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Vienna, Austria',
    answer: 2,
  },

  {
    url: './assets/images/harlequins.jpg',
    question: 'Who created the above picture?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Amadeo Modigliani',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Edgar Degas',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Pablo Picasso',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Paul Cezanne',
    answer: 3,
  },

  {
    url: './assets/images/pula.jpg',
    question: 'Where is the above colosseum?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Pula, Croatia',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Italy, Rome',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Malaga, Spain',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Arles, France',
    answer: 1,
  },

  {
    url: './assets/images/sashiko.jpg',
    question: 'What is the name of the traditional Japanese embroidery, depicted above?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Michiko',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Tamago',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Sashiko',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Mariko',
    answer: 3,
  },

  {
    url: './assets/images/st_peters.jpg',
    question: "Which famous artist redesigned St. Peter's Basilica in the 16th century?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Michelangelo',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Verrochio',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Leonardo da Vinci',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Boticelli',
    answer: 1,
  },

  {
    url: './assets/images/van_gogh.jpg',
    question: "Which famous artist was heavily influenced by Japanese prints in his art?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Rembrandt',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Van Dyke',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Paul Gaugin',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Vincent Van Gogh',
    answer: 4,
  },

  {
    url: './assets/images/william_turner.jpg',
    question: "Which city is depicted in this painting by William Turner?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'London',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Glasgow',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Venice',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Marseille',
    answer: 3,
  },


  {
    url: './assets/images/andy_warhol.jpg',
    question: 'The original Andy Warhol "Factory" was called The _______',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Bronze Factory',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Diamond Factory',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Gold Factory',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Silver Factory',
    answer: 4,
  },

  {
    url: './assets/images/blue_horse.jpg',
    question: 'The painting Blue Horse by Franz Marc announced the birth of which art trend?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Dadaism',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Surrealism',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Fauvism',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Expressionism',
    answer: 4,
  },

  {
    url: './assets/images/cezanne.jpg',
    question: 'Which artist, whose painting you see above, was the forerunner of cubism?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Paul Cezanne',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Georges Seurat',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Francisco Goya',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Diego Velazquez',
    answer: 1,
  },

  {
    url: './assets/images/csontvary_kosztka.jpg',
    question: 'What is the name of the above painting by Hungarian artist Csontvary?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Temple of Baalbek',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Mount of Olives',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Theatre at Taormina',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Pompeii',
    answer: 3,
  },

  {
    url: './assets/images/garfield.jpg',
    question: 'What is the name of the cartoonist who created Garfield and Friends?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Albert Uderzo',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Jim Davis',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'RenÃ© Goscinny',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Stephen Hillenburg',
    answer: 2,
  },

  {
    url: './assets/images/gaugin.jpg',
    question: 'Which book by Maugham is based on the life of French artist Paul Gaugin?',

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'The Moon and Sixpence',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Of Human Bondage',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'The Painted Veil',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Far Eastern Tales',
    answer: 1,
  },

  {
    url: './assets/images/kandinsky.jpg',
    question: "What would be a typical title of one of Kandinsky's works?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'The Sky Above 3',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Lady by the Lake 2',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Improvisation 5',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Suite # 3',
    answer: 3,
  },

  {
    url: './assets/images/matisse.jpg',
    question: "Who painted the above picture?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Marc Chagall',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Paul Cezanne',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Franz Marc',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Henry Matisse',
    answer: 4,
  },

  {
    url: './assets/images/modigliani.jpg',
    question: "What art influenced Modigliani's painting?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Polynesian art',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'African Art',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'South American Art',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Japanese Art',
    answer: 2,
  },

  {
    url: './assets/images/monty_python.jpg',
    question: "Which member of Monty Python was also the team's cartoonist?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'John Cleese',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Graham Chapman',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Terry Gilliam',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Terry Jones',
    answer: 3,
  },

  {
    url: './assets/images/vasarely.jpg',
    question: "Hungarian-French artist Vasarely was the representant of which art trend?",

    choice1: 'A' + '\xa0\xa0\xa0\xa0' + 'Op art',
    choice2: 'B' + '\xa0\xa0\xa0\xa0' + 'Cubism',
    choice3: 'C' + '\xa0\xa0\xa0\xa0' + 'Impressionism',
    choice4: 'D' + '\xa0\xa0\xa0\xa0' + 'Pop art',
    answer: 1,
  },




]

window.onload = startPage;

let fillUsername = document.getElementById('created-name');
let startBtn = document.getElementById('start-btn');
startBtn.addEventListener('click', startGame);
let buttonArea = document.getElementById('answer-area');
let nextBtn = document.getElementById('next-btn');
nextBtn.addEventListener('click', nextPage);
let allButtons = document.querySelector('#button-area')



let questionArea = document.getElementById('question');
let readyQuestion = document.getElementById('ready')
let infoTable = document.getElementById('info-table');
let mainImage = document.getElementById('main-image');



const question = document.querySelector('#question');
const choices = Array.from(document.querySelectorAll('.answer-btn'));
const scoreText = document.querySelector('#to-fill-score');
const photoArea = document.querySelector('#photo');
const numberOfGames = document.querySelector('#to-fill-all-games');
const allScore = document.querySelector('#to-fill-all-score');
const result = document.querySelector('#result');
const endTable = document.getElementById('end-table');


let currentQuestion = {}
let acceptingAnswers = true;
let score = 0;
let questionCounter = 0;
let availableQuestions = [];
const score_points = 100;
const max_questions = 5;
let number_of_games = 0;
let score_in_all_games = 1;


function startPage() {
  startBtn.style.visibility = "visible";
  nextBtn.style.visibility = "hidden";
  buttonArea.style.visibility = "hidden";
  readyQuestion.style.visibility = "visible";
  questionCounter = 0;
  score = 0;
  photoArea.append(mainImage);
  endTable.style.visibility="hidden";
  startBtn.innerText="Start"
  



}

function nextPage() {
  nextBtn.style.visibility = "visible";
  questionArea.style.visibility = "visible";
  getNewQuestion();
  questionCounter++;

  if (acceptingAnswers === false) {
    buttonArea.classList.toggle("disabled");
    acceptingAnswers = true;
  }
}



function removeMainImage() {
  mainImage.remove();
}

function removeReadyQuestion() {
  readyQuestion.remove();

}

function removeStartBtn() {

  startBtn.remove();
}

function startGame() {

  photoArea.style.visibility = "visible";
  buttonArea.style.visibility = "visible";
  nextBtn.style.visibility = "visible";
  questionArea.style.visibility = "visible";
  console.log('Game started')
  removeMainImage();
  removeReadyQuestion();
  removeStartBtn();
  nextPage();
  endTable.remove();

}




//questionCounter++;
availableQuestions = availableImages = [...questions];

getNewQuestion = () => {

  if ((availableQuestions.length === 0) || (questionCounter > max_questions)) { //took out = here
    localStorage.setItem('mostRecentScore', score);
    // return window.location.assign('/end.html')

     numberOfGames.innerText = ('The End!');
    //let restartBtn=document.querySelector('#restart-btn')

  

    //startBtn.style.visibility = "visible";
    startBtn.addEventListener('click', restartPage)
    endTable.style.visibility="visible";
    startBtn.innerText = "Restart";
    endGame();
    


  } else {


    const questionsIndex = imageIndex = Math.floor(Math.random() * availableQuestions.length);
    currentQuestion = currentImage = availableQuestions[questionsIndex];
    question.innerText = currentQuestion.question;
    let image = availableImages[imageIndex].url;



    photoArea.innerHTML = "<img src=\"" + image + "\" width=\"auto\" height=\"auto\"><br>";

    choices.forEach(choice => {
      const number = choice.dataset['number'];
      choice.innerText = currentQuestion['choice' + number];

    })
    availableQuestions.splice(questionsIndex, 1);
    // acceptingAnswers = true;

  }

}



choices.forEach(choice => {
  choice.addEventListener('click', e => {
    if (!acceptingAnswers) return

    acceptingAnswers = false;
    const selectedChoice = e.target;
    const selectedAnswer = selectedChoice.dataset['number'];
    let classToApply = selectedAnswer == currentQuestion.answer ? 'correct' : 'incorrect'



    if (classToApply === 'correct') {
      incrementScore(score_points)
      result.innerHTML = `Correct! +${score_points} points!`
      result.style.color = "green";


    } else {
      result.innerHTML = "Incorrect! 0points"
      result.style.color = "red";
    }

    // buttonArea.classList.toggle("disabled")

    // selectedChoice.parentElement.classList.add(classToApply);

    selectedChoice.classList.add(classToApply);


    setTimeout(() => {
      console.log(acceptingAnswers)
      selectedChoice.classList.remove(classToApply)
      const resDiv = document.querySelector('#res-div')
      resDiv.append(result.innerText = "")
      // console.log('set timeout')
      buttonArea.classList.toggle("disabled")
    }, 900)
  })

})

incrementScore = num => {
  score += num;
  scoreText.innerText = score;


}

incrementNumberOfGames = num => {
  number_of_games += num;
  numberOfGames.innerText = number_of_games;

}

incrementAllScore = num => {
  score += score_in_all_games = num;
  allScore.innerText = score_in_all_games;

}





function endGame() {
 
  startBtn.remove()
  photoArea.remove();
  questionArea.remove();
  buttonArea.remove();
  nextBtn.remove();
  console.log(questionCounter)
  allButtons.prepend(startBtn)
  startBtn.style.visibility = "visible";
  allButtons.append(displayResults)
  console.log('restart game')


  }

  const displayResults = document.querySelector('#end-table')
  let numberOfQuestions = score / 100;
  if (numberOfQuestions <= 6) {

   displayResults.innerText = `Hello *${username}, thanks for playing. Well done! You got ${numberOfQuestions} questions right. Play again for en even better result!`;

  } else if ((numberOfQuestions > 6) && (numberOfQuestions <= 10)) {
    displayResults.innerText = `Hello ${username}, thanks for playing. You got ${numberOfQuestions} questions right. Great job! Play again for en even better result!`

  } else if ((numberOfQuestions > 10) && (10 < numberOfQuestions < 14)) {
    displayResults.innerText = `Hello ${username}, thanks for playing. You got ${numberOfQuestions} questions right. Great job! You do know your art!`
  } else 
  {
    displayResults.innerText = `Hello ${username}, thanks for playing. You got all questions right. You really, really know your art!`}
    allButtons.prepend(startBtn);
    
    
    



function restartPage() {

  // allButtons.append(startBtn);
  //restartBtn.remove();
  //removeStartBtn();
  startBtn.addEventListener('click', removeStartBtn())
  let photoArea2 = document.querySelector('#photo-area')
  photoArea2.append(photoArea)
  //readyQuestion.style.visibility = "visible";
  /*if (questionCounter = 0) {
    photoArea2.append(mainImage)
  } else {
    photoArea2.append(photoArea)
  }*/
  questionCounter=0;
  let questionArea2 = document.querySelector('#question-area')
  questionArea2.append(questionArea);
  //buttonArea = document.querySelector('#answer-area')
  allButtons.append(buttonArea);
  const resDiv = document.querySelector('#res-div')
  allButtons.append(resDiv)
  nextBtn.style.visibility = "visible";
  allButtons.append(nextBtn);
  
  //endTable.remove();
  //startPage();
  startGame();

}



//const username = document.querySelector('#username');
//const saveBtn = document.querySelector('#save-btn');
//const username = document.querySelector('#username');
//const username = document.querySelector('#username');